<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="columns.css">
    <style>
        
    </style>
</head>
<body>
    <button onclick="section.destroy()">Destroy</button>
    <button onclick="section.init()">Init</button>
    <button onclick="save()">Save</button>

    <button class="plugin-definition" data-id="4">Plugin 4</button>
    <button class="plugin-definition" data-id="5">Plugin 5</button>
    <button class="plugin-definition" data-id="6">Plugin 6</button>

    <div class="section" data-name="FirstSection">
        <div class="plugin-container" data-cols="12" data-cols-md="6" data-cols-lg="4">
            <div class="plugin-content">Plugin 1</div>
        </div>
        <div class="plugin-container" data-cols="12" data-cols-md="6" data-cols-lg="4">
            <div class="plugin-content">Plugin 2</div>
        </div>
        <div class="plugin-container" data-cols="12" data-cols-md="6" data-cols-lg="4">
            <div class="plugin-content">Plugin 3</div>
        </div>
    </div>

    <script src="columns.js"></script>
    <script>
        const section = Columns(
            document.querySelector('.section'), 
            { 
                gridLines: false,
                colClass: 'plugin-container'
            }
        )
        section.init()

        document.querySelectorAll('.plugin-definition').forEach(def => { 
            def.addEventListener('click', () => {
                section.append({cols: 4, content: `<h1>${def.textContent}</h1>`})
            })
        })
       
        function save() {
            const sections = {}
            document.querySelectorAll('.section').forEach((section) => {
                const s = []
                section.querySelectorAll('.plugin-container').forEach(plugin => {
                    s.push(plugin.dataset)
                })
                console.log({s}, section.dataset.name)
                sections[section.dataset.name] = s
            })
            
            alert(JSON.stringify(sections, null, 2))
        }
    </script>
</body>
</html>